<title>Aime oncall 工作手册</title>
<url>https://bytedance.larkoffice.com/wiki/K2twwH2zKiQIRHkQUVlcgzj6nm6</url>
<content>
最近更新：2026-01-09

## 大卫和小美的区别
**大卫（David/invited_expert）** 是专家级 AI Agent，定位为"受邀专家"。他擅长多角度分析、深度推演，特别适合处理研发与代码相关任务。目前大卫已支持 auto 模式，既可以快速回答简单问题，也能深度处理复杂任务，具备更强的推理能力和专业水平。**建议优先使用大卫处理各种类型的任务**，他是生产环境中的全能首选。

**小美（XiaoMei/newbie）** 是新手级 AI Agent，定位为"入门助手"。她擅长高效执行、结构清晰，特别适合处理调研与文档生成相关任务。小美在处理常规任务时需要更详细的指导和示例，能够快速响应基础需求。**需要注意的是，随着大卫 auto 模式的完善，小美将逐渐下线，建议新用户直接使用大卫以获得更好的体验。**

### 浏览器与登录
- **问题**：访问 Aime 浏览器需要重复扫码登录，效率低下。

- **解决进展**：已升级浏览器登录管理模式。在浏览器接管时**勾选“保持登录状态”**，即可保存 Cookie。飞书登录状态可保持 30 天，SSO 登录可保持 15 天。

- **问题**：页面鉴权卡住，无法弹出授权页面。

- **解决方案**：此问题与浏览器配置有关。可以尝试以下任一方法：
	- 在浏览器设置中，**启用“网站可以发送弹出式窗口并使用重定向”**。
	- 将 Aime 域名 `https://aime.bytedance.net` **添加至浏览器允许列表**。

### 文档处理与权限
- **问题**：Aime 创建的飞书文档无法直接移动到项目 Wiki，需要手动申请权限。

- **解决进展**：
	- **临时方案**：手动点击文档“获取飞书链接”，完成权限操作后再移动。
	- **规划方案**：项目空间将新增单独文件夹统一管理文档权限，无需逐个申请。任务模板创建的文档，所有者将默认为任务发起人。

- **问题**：定时任务生成的飞书文档，推送时群成员无阅读权限。

- **解决方案**：在开通定时任务时，将**官方机器人推送配置到同一个群**里，机器人会在推送消息里带上文档链接，群成员即可拥有阅读权限。

- **问题**：项目空间中，其他同学看不到任务产物文档。

- **解决进展**：目前需要找文档所有者手动申请。后续将支持**产物文档默认对空间内所有成员开放权限**。

- **问题**：Aime 生成的文档无法移入知识库。

- **解决方案**：需先**创建并配置项目空间**，之后即可支持飞书文档、表格、多维表格、知识库等多种类型的批量导入和管理。

- **问题**：任务结束后只生成了 `.md` 文件，未生成飞书文档，或生成的文档链接无法打开。

- **解决进展**：该问题由模型转述错误或对任务类型判断失误导致，相关优化已在进行中。目前的规则是简单问题直接输出结果，调研类任务生成飞书文档。

- **问题**：如何让 Aime 编辑用户已有的文档？

- **解决方案**：目前已支持。打开目标文档，点击右上角“更多”->“添加文档应用”，**加入 Aime 机器人并授予编辑权限**即可。

### CR/MR 评论与代码
- **问题**：如何将 Aime CR 的评论结果自动添加到 MR 中？

- **解决方案**：Aime CR 可与 Codebase 联动，在提交 MR 后自动发起评审，并以 Comment 形式提交。可以在 Query 中增加“**将评审结果以 Comment 形式提交到 Merge Request**”的要求。虽然行号不准的问题仍在优化，但该功能已可用。

- **问题**：如何在新建 MR 后自动调用 Aime 进行代码检测？

- **解决进展**：Aime CR 与 Codebase 的联动功能正在调试中，将支持在提交 MR 后自动发起评审。

- **问题**：如何为 CR 任务补充自定义知识库？

- **解决方案**：在查询时**附上相关飞书文档或自定义规则**，Aime 会先读取这些内容再进行代码审查。

### DeepWiki、i18n 与 Argos
- **问题**：DeepWiki 信息不正确如何校正？

- **解决方案**：从 DeepWiki 仓库页面右上角获取 Wiki 子仓库链接，**直接修改内容或修改相关的模板 YAML**，下次生成时即可生效。

- **问题**：DeepWiki 是否支持 MCP/API？

- **解决方案**：已支持 MCP 功能，可参考相关使用指南。

- **问题**：Aime 是否支持 i18n 地区的 Argos 日志搜索？

- **解决方案**：**已支持**。可通过 logid 或关键词两种方式在 `https://aime.tiktok-row.net/chat` 上进行查询。

- **问题**：创建 i18n 自定义 MCP 时出现鉴权报错。

- **解决方案**：若使用 Streamable HTTP 或 SSE 接入，请检查域名是否为生产网可访问。办公网（OG）域名在生产网不可用，**需使用生产网域名**。

### 模板与定时任务
- **问题**：个人空间的模板如何迁移到项目空间？

- **解决方案**：使用“**模板一键迁移**”功能。在目标项目空间点击“创建模板”->“导入”，即可批量选择迁移（单次最多 50 个）。

- **问题**：如何为自定义模板选择 MCP？

- **解决方案**：创建自定义模板需基于已有任务。如需调整 MCP，**必须基于新的任务重新创建模板**。

- **问题**：如何拿到模板 Link 调用的结果？是否有回调 API？

- **解决方案**：通过模板 Link 调用后，**暂不支持回调 API**，需要手动在 Aime 中查看执行结果。

- **问题**：如何实现多步骤的定时任务？

- **解决方案**：
	- Aime 定时任务暂不支持多步骤执行。
	- **临时方案**：在项目空间绑定一个 Meego 空间，将任务配置成工作流。后续将支持基于 Meego 的工作流自动执行模板任务。

### MCP 配置与鉴权
- **问题**：自定义 MCP 如何共享给团队同学？

- **解决方案**：目前只能通过**分享配置链接**让其他同学手动配置。项目空间的 MCP 共享功能正在规划中。

- **问题**：自定义 MCP 如何根据当前用户返回相关数据？

- **解决进展**：将支持用户管理 MCP 的鉴权信息，可配置字节云 SSO 和 Header 鉴权，并支持在 Aime 上调试。

### 代码产物与版本管理
- **问题**：如何下载 Aime 生成的代码工程？

- **解决方案**：
	- **旧版方式**：在 IDE 页面，右键点击一个非系统文件夹进行下载。
	- **功能优化**：即将上线代码产物优化功能，支持按项目粒度汇总代码文件、管理版本和划线问答。

## 常用操作与排障 Tips
- **飞书群聊总结**：确保已将 Aime 机器人拉入需要总结的群聊，并在任务中**开启飞书群聊 MCP 工具**。

- **OpenAPI 与模板 Link**：
	- 完整 OpenAPI 支持仍在申请和规划中（预计 26 年 Q1）。
	- 可使用**模板 Link** 功能在其他平台触发 Aime 模板并自动填充参数，作为临时的集成方案。

- **定时轮询与 Sleep**：Aime 不会主动轮询。当任务等待指令时，可以**在新一轮对话中输入指令**，例如“开始轮询，每隔 5 分钟检查一次，直到任务完成”，通过 `sleep` 指令实现定时检查。

- **读取飞书多维表格**：分享给 Aime 的链接**必须是浏览器中打开时带有&nbsp;table&nbsp;字样的网址链接**，而不是分享功能生成的短链接。同时，操作者需要有该表格的导出权限。

- **获取 JSON 格式输出**：
	- 如果 JSON 数据量不大，可以使用**字节云 MCP 快速搭建一个 Faas** 来接收。
	- 如果数据量较大，需要为 Aime 提供一个 **OpenAPI**，让它通过 HTTP 请求将 JSON 写回用户的系统。

- **长上下文影响效果**：如果感觉历史对话过长导致模型表现下降（上下文污染），最简单的解决方案是**重开一个新任务**。

- **处理大批量重复任务（避免 OOM）**：当任务需要调用数百次 MCP 且返回内容过长时，为避免内存溢出，推荐通过 **OpenAPI 方式提供 MCP 工具**，让 Aime 以 Python 脚本形式调用。这样可以避免将所有 API 返回内容都计入上下文。

- **访问特定环境页面**：在提示词中明确告知 Aime，在使用 Browser use 时**需要添加特定的 Header 信息**。

- **查看各步骤执行时长**：目前只有**自定义 MCP 工具**可以查询到具体执行时间。可以在 `https://aime.bytedance.net/debug` 页面输入任务 ID 进行查询。

- **仓库识别**：在发起任务时，使用 **@&nbsp;仓库功能**，可以快速搜索并导入有权限的 Codebase 仓库、分支或文件。

- **DeepWiki 索引更新与排障**：
	- 点击索引时间后的“更新按钮”，可以**手动更新超过 3 天未更新的知识库**。
	- 如遇卡顿或 “thinking” 模块消失，可能与 Kitex 或 Mesh 有关，建议**重新打开标签页或直接 oncall**。

## 与值班相关的功能上新
- **快捷指令**：将复杂的 Prompt 封装为简单的参数输入，可用于**一键生成 Oncall 总结、群聊总结**等，大幅提升重复性工作的效率。

- **模板一键迁移**：支持将个人空间的优质模板**批量迁移至项目空间**，便于团队共享和维护 Oncall 经验。

- **模板功能升级**：支持**从零新建模板**并灵活配置参数，提高了任务输出的稳定性和可维护性，便于固化 Oncall 解决方案。

- **AICR / CR 评审**：Aime CR 已全量可用，并支持**批量配置**。能够理解代码全局上下文，发现深层问题，并自动将评论提交到 MR，提升 Code Review 效率。

- **i18n 支持**：已完成 `Row - TT` 机房服务搭建，**支持对非欧美地区的 TT 数据和 Argos 日志进行分析**，解决了海外业务的 Oncall 需求。

- **代码产物优化**：优化了代码产物的管理和下载方式，支持**按项目粒度汇总和版本管理**，解决了以往下载不便和版本混乱的问题。

- **编辑用户自有文档**：Aime 已支持**直接编辑用户授权的飞书或 Wiki 文档**，便于直接在原始文档上进行修复和更新，无需复制粘贴。

- **IDE 插件**：支持在 VSCode 等 IDE 中通过插件**直接发起 Aime 任务**，实现了在开发环境内的无缝协作。

- **飞书画板集成**：支持**生成可编辑的飞书画板**（如架构图、流程图），替代了过去只能生成静态图片的方式，便于 Oncall 过程中进行图表协作和修改。

- **大型代码仓库项目记忆**：通过在代码仓库中添加 `AGENT.md` 文件，可以让 Aime “记住”项目背景、架构和规范，在执行 CR 等任务时**减少重复沟通，提高准确性**。


</content>
